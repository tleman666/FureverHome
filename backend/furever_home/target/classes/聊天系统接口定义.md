### 1. **获取会话列表**
```
GET /api/conversations
```

**请求参数：**
- `page`: number - 页码（可选，默认1）
- `pageSize`: number - 每页数量（可选，默认20）

**响应数据：**
```typescript
{
  code: number
  message: string
  data: {
    list: [
      {
        conversationId: number          // 会话ID
        targetUserId: number             // 对方用户ID
        targetUserName: string           // 对方用户名
        targetUserAvatar: string         // 对方头像URL
        lastMessage: string              // 最后一条消息内容
        lastMessageTime: string          // 最后消息时间
        unreadCount: number              // 未读消息数
      }
    ]
    total: number
  }
}
```

---

### 2. **获取聊天记录**
```
GET /api/conversations/{conversationId}/messages
```

**路径参数：**
- `conversationId`: number - 会话ID

**请求参数：**
- `page`: number - 页码（可选，默认1）
- `pageSize`: number - 每页数量（可选，默认50）
- `beforeMessageId`: number - 获取某条消息之前的记录（可选，用于加载更多）

**响应数据：**
```typescript
{
  code: number
  message: string
  data: {
    list: [
      {
        messageId: number              // 消息ID
        conversationId: number         // 会话ID
        senderId: number               // 发送者ID
        receiverId: number             // 接收者ID
        content: string                // 消息内容
        messageType: 'text' | 'image' | 'file'  // 消息类型
        isRead: boolean                // 是否已读
        createdAt: string              // 发送时间
      }
    ]
    total: number
    hasMore: boolean                   // 是否还有更多历史消息
  }
}
```

---

### 3. **发送消息**
```
POST /api/messages
```

**请求体：**
```typescript
{
  receiverId: number                   // 接收者用户ID
  content: string                      // 消息内容
  messageType: 'text' | 'image' | 'file'  // 消息类型（可选，默认text）
  conversationId?: number              // 会话ID（可选，首次发送可能没有）
}
```

**响应数据：**
```typescript
{
  code: number
  message: string
  data: {
    messageId: number
    conversationId: number             // 返回会话ID（用于首次创建会话）
    senderId: number
    receiverId: number
    content: string
    messageType: string
    createdAt: string
  }
}
```

---

### 4. **标记消息已读**
```
PUT /api/conversations/{conversationId}/read
```

**路径参数：**
- `conversationId`: number - 会话ID

**响应数据：**
```typescript
{
  code: number
  message: string
  data: null
}
```

---

### 5. **搜索会话/用户**（可选）
```
GET /api/conversations/search
```

**请求参数：**
- `keyword`: string - 搜索关键词（用户名）

**响应数据：**
```typescript
{
  code: number
  message: string
  data: [
    {
      userId: number
      userName: string
      avatar: string
      conversationId?: number          // 如果已有会话则返回
    }
  ]
}
```

---

### 6. **获取未读消息总数**（可选）
```
GET /api/messages/unread-count
```

**响应数据：**
```typescript
{
  code: number
  message: string
  data: {
    totalUnread: number                // 总未读数
  }
}
```

---

## WebSocket 实时消息（推荐）

**连接地址：**
```
ws://your-domain/api/ws/chat?token={userToken}
```

**接收消息格式：**
```typescript
{
  type: 'new_message'                  // 消息类型
  data: {
    messageId: number
    conversationId: number
    senderId: number
    senderName: string
    senderAvatar: string
    content: string
    messageType: string
    createdAt: string
  }
}
```

---

## 总结

**核心接口（必需）：**
1. 获取会话列表
2. 获取聊天记录
3. 发送消息
4. 标记已读

**增强功能（可选）：**
5. 搜索功能
6. 未读数统计
7. WebSocket 实时推送

你可以把这个定义发给后端开发人员，让他们按照这个格式实现接口。有了接口文档后，我就可以为你创建对应的 TypeScript API 文件了。